<!DOCTYPE html>
<html lang="{{ .Site.Language.Lang }}" class="scroll-smooth">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- DNS Prefetch & Preconnect -->
    <link rel="dns-prefetch" href="//fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />

    <link rel="preconnect" href="https://cdn.brevo.com" crossorigin />
    <link rel="preconnect" href="https://cdn.wonderpush.com" crossorigin />
    <link rel="preconnect" href="https://news.google.com" crossorigin />
    <link
      rel="preconnect"
      href="https://www.googletagmanager.com"
      crossorigin
    />

    <!-- Title -->
    <title>
      {{ if .IsHome }} santai dikit online — mikir santai, tapi tetap jalan {{
      else if .Title }} {{ .Title }} | santai dikit online {{ else }} santai
      dikit online {{ end }}
    </title>

    <meta
      name="description"
      content="{{ with .Params.description }}{{ . }}{{ else }}santai dikit online adalah tempat mikir ringan tapi tetap nyangkut. Buat yang suka ngebahas hal-hal receh tapi dalem.{{ end }}"
    />
    <link rel="canonical" href="{{ .Permalink }}" />

    <!-- Open Graph -->
    <meta
      property="og:title"
      content="{{ if .IsHome }}santai dikit online — mikir santai, tapi tetap jalan{{ else }}{{ .Title }} | santai dikit online{{ end }}"
    />

    <meta
      property="og:description"
      content="{{ with .Params.description }}{{ . }}{{ else }}santai dikit online adalah tempat mikir ringan tapi tetap nyangkut.{{ end }}"
    />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="{{ .Permalink }}" />
    <meta
      property="og:image"
      content="{{ site.BaseURL }}uploads/og-default.webp"
    />

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta
      name="twitter:title"
      content="{{ with .Title }}{{ . }} | {{ end }}santai dikit online"
    />

    <meta
      name="twitter:description"
      content="{{ with .Params.description }}{{ . }}{{ else }}santai dikit online adalah tempat mikir ringan tapi tetap nyangkut.{{ end }}"
    />
    <meta
      name="twitter:image"
      content="{{ site.BaseURL }}uploads/og-default.webp"
    />

    <!-- Styles -->
    <!-- Optimized CSS loading -->
    <link rel="preload" href="/assets/css/bundle.css" as="style" />
    <link
      rel="stylesheet"
      href="/assets/css/bundle.css"
      media="print"
      onload="this.media='all'"
    />
    <noscript><link rel="stylesheet" href="/assets/css/bundle.css" /></noscript>

    <!-- Google Fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500;700&display=swap"
      rel="stylesheet"
    />

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="shortcut icon" href="/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <meta name="apple-mobile-web-app-title" content="Santai Dikit" />
    <link rel="manifest" href="/site.webmanifest" />

    <!-- RSS Feed -->
    {{ with .OutputFormats.Get "rss" }} {{ printf `
    <link rel="%q" type="%q" href="%q" title="%q" />
    ` .Rel .MediaType.Type .Permalink site.Title | safeHTML }} {{ end }}

    <!-- Google AdSense -->
    <meta name="google-adsense-account" content="ca-pub-8527144637859921" />

    <!-- AdSense Auto Ads -->
    <script
      async
      src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8527144637859921"
      crossorigin="anonymous"
    ></script>

    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-8527144637859921",
        enable_page_level_ads: true,
      });
    </script>

    <!-- Google Analytics -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-6N9MTYL3BG"
    ></script>

    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());

      gtag("config", "G-6N9MTYL3BG");
    </script>

    <!-- Lazy Script Loader -->
    <script>
      window.addEventListener("DOMContentLoaded", function () {
        const loadScript = (src) => {
          const s = document.createElement("script");
          s.src = src;
          s.async = true;
          document.body.appendChild(s);
        };

        // Load Brevo SDK
        loadScript("https://cdn.brevo.com/js/sdk-loader.js");
        window.Brevo = window.Brevo || [];
        Brevo.push(["init", { client_key: "o1mymh2cedwgdk0anrg26jch" }]);

        // Load Google Reader Revenue
        loadScript("https://news.google.com/swg/js/v1/swg-basic.js");
        window.SWG_BASIC = window.SWG_BASIC || [];
        SWG_BASIC.push((basicSubscriptions) => {
          basicSubscriptions.init({
            type: "NewsArticle",
            isPartOfType: ["Product"],
            isPartOfProductId: "CAowiOq8DA:openaccess",
            clientOptions: { theme: "light", lang: "id" },
          });
        });
      });
    </script>

    <!-- JSON-LD untuk homepage -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "Organization",
        "name": "santai dikit online",
        "url": "https://santaidikit.online",
        "logo": "https://santaidikit.online/uploads/si-dikit-no-bg.webp",
        "sameAs": []
      }
    </script>

    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "WebSite",
        "url": "https://santaidikit.online",
        "name": "santai dikit online",
        "potentialAction": {
          "@type": "SearchAction",
          "target": "https://santaidikit.online/search?q={search_term_string}",
          "query-input": "required name=search_term_string"
        }
      }
    </script>

    <!-- JSON-LD untuk artikel (jika applicable) -->
    {{ partial "structured-article.html" . }}
  </head>

  <body
    class="bg-gradient-to-br from-white via-[#f0f0f0] to-[#e8eff1] text-gray-800 font-firacode antialiased dark:from-[#1c1c1e] dark:via-[#222] dark:to-[#111] dark:text-gray-200"
  >
    <!-- Header -->
    <header
      class="bg-white/90 dark:bg-[#1e1e1e] backdrop-blur-md shadow-sm sticky top-0 z-50"
    >
      <div
        class="max-w-6xl mx-auto px-4 py-4 flex justify-between items-center animate-fade-in"
      >
        <!-- Logo -->
        <a href="/">
          <img
            src="/uploads/logo-santai.webp"
            alt="santai dikit online"
            class="h-10 w-auto"
            loading="lazy"
          />
        </a>

        <!-- Hamburger Button (Mobile only) -->
        <button
          id="menu-toggle"
          class="lg:hidden text-gray-700 dark:text-gray-200"
        >
          <svg
            class="w-6 h-6"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            viewBox="0 0 24 24"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M4 6h16M4 12h16M4 18h16"
            />
          </svg>
        </button>

        <!-- Nav Menu -->
        <nav
          id="nav-menu"
          class="hidden lg:flex flex-col lg:flex-row lg:items-center lg:space-x-4 space-y-2 lg:space-y-0 text-sm font-medium text-gray-700 dark:text-gray-200 font-sans absolute lg:static top-full left-0 w-full lg:w-auto bg-white dark:bg-[#1e1e1e] lg:bg-transparent px-4 lg:px-0 py-4 lg:py-0 shadow lg:shadow-none z-40"
        >
          {{ $current := .RelPermalink }} {{ $isActive := eq $current "/" }}
          <a
            href="/"
            class="block py-2 lg:py-0 transition {{ if $isActive }}text-[#f07f48] font-semibold{{ else }}hover:text-[#f07f48]{{ end }}"
            >Rumah
          </a>

          {{ $isActive := strings.HasPrefix $current "/rekomendasi" }}
          <a
            href="/rekomendasi/"
            class="block py-2 lg:py-0 transition {{ if $isActive }}text-[#f07f48] font-semibold{{ else }}hover:text-[#f07f48]{{ end }}"
            >Pilihan
          </a>

          {{ $isActive := strings.HasPrefix $current "/cara-pikir" }}
          <a
            href="/cara-pikir/"
            class="block py-2 lg:py-0 transition {{ if $isActive }}text-[#f07f48] font-semibold{{ else }}hover:text-[#f07f48]{{ end }}"
            >Pikiran
          </a>

          {{ $isActive := strings.HasPrefix $current "/posts" }}
          <a
            href="/posts/"
            class="block py-2 lg:py-0 transition {{ if $isActive }}text-[#f07f48] font-semibold{{ else }}hover:text-[#f07f48]{{ end }}"
            >Tulisan
          </a>

          {{ $isActive := strings.HasPrefix $current "/portofolio" }}
          <a
            href="/portofolio/"
            class="block py-2 lg:py-0 hover:text-[#f07f48] transition {{ if $isActive }}text-[#f07f48] font-semibold{{ else }}hover:text-[#f07f48]{{ end }}"
            >Karya
          </a>

          {{ $isActive := strings.HasPrefix $current "/tentang" }}
          <a
            href="/tentang/"
            class="block py-2 lg:py-0 hover:text-[#f07f48] transition {{ if $isActive }}text-[#f07f48] font-semibold{{ else }}hover:text-[#f07f48]{{ end }}"
            >Kenalan
          </a>

          {{ $isActive := strings.HasPrefix $current "/kontak" }}
          <a
            href="/kontak/"
            class="block py-2 lg:py-0 hover:text-[#f07f48] transition {{ if $isActive }}text-[#f07f48] font-semibold{{ else }}hover:text-[#f07f48]{{ end }}"
            >Ngobrol
          </a>

          <!-- Dark mode toggle -->
          <button
            id="dark-toggle"
            class="block mt-2 lg:mt-0 lg:ml-4 text-base transition hover:text-[#659fb2]"
            aria-label="Toggle mode gelap/terang"
          >
            🌙 / ☀️
          </button>
        </nav>
      </div>
    </header>

    <!-- Main Content -->
    <main
      class="px-4 sm:px-6 lg:px-8 py-12 max-w-5xl mx-auto animate-fade-in-up"
    >
      {{ block "main" . }}{{ end }}
    </main>

    <!-- Footer -->
    <footer
      class="bg-gray-800 text-gray-300 py-12 font-firacode border-t border-gray-700 animate-fade-in"
    >
      <div class="max-w-5xl mx-auto px-4 text-center">
        <p class="text-sm tracking-wide">
          © {{ now.Year }} santai dikit online
        </p>

        <p class="mt-2 text-xs text-[#659fb2] dark:text-[#88c8da]">
          Dibuat dengan cinta, ditemani secangkir kopi & mikir santai ☕
        </p>

        <div class="mt-8 text-xs text-[#659fb2] dark:text-[#88c8da] space-x-4">
          <a
            href="/tentang/"
            class="hover:text-[#f07f48] dark:hover:text-[#f7a678] transition"
            >Tentang</a
          >
          <a
            href="/redaksi/"
            class="hover:text-[#f07f48] dark:hover:text-[#f7a678] transition"
            >Redaksi</a
          >
          <a
            href="/privacy-policy/"
            class="hover:text-[#f07f48] dark:hover:text-[#f7a678] transition"
            >Privasi</a
          >
          <a
            href="/terms/"
            class="hover:text-[#f07f48] dark:hover:text-[#f7a678] transition"
            >Ketentuan</a
          >
          <a
            href="/dukungan/"
            class="hover:text-[#f07f48] dark:hover:text-[#f7a678] transition"
            >Dukungan</a
          >
          <a
            href="/index.xml"
            class="hover:text-[#f07f48] dark:hover:text-[#f7a678] transition"
            >RSS Feed</a
          >
        </div>

        <p class="mt-4 text-xs text-[#659fb2] dark:text-[#88c8da]">
          Powered by
          <a
            href="https://gohugo.io"
            class="text-[#f07f48] dark:text-[#f7a678] hover:underline"
            >Hugo</a
          >
          &
          <a
            href="https://tailwindcss.com"
            class="text-[#f07f48] dark:text-[#f7a678] hover:underline"
            >Tailwind CSS</a
          >.
        </p>
      </div>
    </footer>

    <!-- Animations -->
    <style>
      .animate-fade-in {
        animation: fadeIn 1s ease-out both;
      }

      .animate-fade-in-up {
        animation: fadeInUp 1.2s ease-out both;
      }

      @keyframes fadeIn {
        0% {
          opacity: 0;
        }
        100% {
          opacity: 1;
        }
      }

      @keyframes fadeInUp {
        0% {
          opacity: 0;
          transform: translateY(20px);
        }
        100% {
          opacity: 1;
          transform: translateY(0);
        }
      }
    </style>

    <script>
      const menuToggle = document.getElementById("menu-toggle");
      const navMenu = document.getElementById("nav-menu");
      const darkToggle = document.getElementById("dark-toggle");
      const html = document.documentElement;

      // Toggle mobile menu
      menuToggle.addEventListener("click", () => {
        navMenu.classList.toggle("hidden");
      });

      // Dark mode toggle
      if (
        localStorage.getItem("theme") === "dark" ||
        (!localStorage.getItem("theme") &&
          window.matchMedia("(prefers-color-scheme: dark)").matches)
      ) {
        html.classList.add("dark");
      }

      darkToggle.addEventListener("click", () => {
        html.classList.toggle("dark");
        localStorage.setItem(
          "theme",
          html.classList.contains("dark") ? "dark" : "light"
        );
      });

      // Service Worker registration
      if ("serviceWorker" in navigator) {
        window.addEventListener("load", function () {
          navigator.serviceWorker
            .register("/service-worker.js")
            .then(function (reg) {
              console.log("Service Worker registered.", reg);
            })
            .catch(function (err) {
              console.warn("Service Worker failed:", err);
            });
        });
      }
    </script>
  </body>
</html>
